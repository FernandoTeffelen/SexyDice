{% extends 'base.html' %}

{% block title %}Faça uma Doação{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">

            <div id="donation-form-area" class="card shadow-lg border-0 p-4">
                <div class="text-center mb-4">
                    <h2 class="fw-bold text-primary">Apoie o Projeto!</h2>
                    <p class="lead text-muted">Sua doação ajuda a manter o site no ar e me incentiva a criar novas funcionalidades.</p>
                </div>
                <div class="mb-3">
                    <label for="donationAmount" class="form-label fw-bold"><i class="bi bi-cash-coin me-2"></i>Valor da Doação (R$)</label>
                    <input type="number" class="form-control form-control-lg" id="donationAmount" min="1" step="0.01" placeholder="Mínimo R$ 1,00" required>
                </div>
                <div class="mb-3">
                    <label for="payerEmail" class="form-label fw-bold"><i class="bi bi-envelope-fill me-2"></i>Seu E-mail (Opcional)</label>
                    <input type="email" class="form-control form-control-lg" id="payerEmail" placeholder="Para identificarmos sua doação">
                </div>
                <div class="mb-4">
                    <label for="donationMessage" class="form-label fw-bold"><i class="bi bi-chat-left-text-fill me-2"></i>Deixe uma mensagem (Opcional)</label>
                    <textarea class="form-control" id="donationMessage" rows="3" placeholder="Sua mensagem de apoio..."></textarea>
                </div>
                <button id="donateButton" class="btn btn-warning btn-lg w-100 py-3">
                    <i class="bi bi-heart-fill me-2"></i> Gerar PIX para Doação
                </button>
                 <div id="error-message" class="alert alert-danger mt-3 text-center" style="display: none;"></div>
            </div>

            <div id="payment-area" class="card shadow-lg border-0 p-4 mt-5 text-center" style="display: none;">
                <div id="payment-timer" class="alert alert-warning mt-3 text-center fs-5" style="display: none;"></div>
                <h4 class="text-primary mb-3"><i class="bi bi-qr-code me-2"></i> Escaneie ou Copie para Pagar</h4>
                <p class="text-muted mb-4">Agradecemos de coração! Sua ajuda é muito importante para nós.</p>
                <img id="qrCodeImage" src="" alt="QR Code PIX" class="img-fluid mb-3 mx-auto" style="max-width: 280px; border: 2px solid #0d6efd; border-radius: 8px;">
                <div class="mb-4">
                    <label for="pixCodeText" class="form-label fw-bold">Código PIX Copia e Cola:</label>
                    <div class="input-group">
                        <input type="text" class="form-control form-control-lg" id="pixCodeText" readonly value="">
                        <button class="btn btn-outline-secondary" type="button" id="copyPixCodeBtn">
                            <i class="bi bi-clipboard"></i> Copiar
                        </button>
                    </div>
                    <small class="form-text text-muted">Copie este código e cole no aplicativo do seu banco.</small>
                </div>
                <p class="fw-bold text-success"><i class="bi bi-check-circle me-2"></i> Aguardando Confirmação do Pagamento...</p>
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>

            <div id="success-area" class="card shadow-lg border-0 p-4 mt-5 text-center" style="display: none;">
                <h3 class="text-success mb-3"><i class="bi bi-balloon-heart-fill me-2"></i>Muito Obrigado!</h3>
                
                <p class="lead">Sua doação foi recebida com sucesso.</p>
                <p class="lead">Me ajuda a manter o projeto no ar e me incentivar a criar novas funcionalidades.</p>

                <p class="mt-3">Você é incrível! ❤️</p>
                <a href="{{ url_for('main_bp.index') }}" class="btn btn-primary mt-3">Voltar para a Home</a>
            </div>

        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/doacao.js') }}"></script>
{% endblock %}